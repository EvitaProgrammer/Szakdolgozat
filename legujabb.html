<!DOCTYPE html>
<html lang="hu">
<head>
	<title>Evelin Szakdolgozat</title>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link rel="stylesheet" href="css/bootstrap-3.3.7.min.css">
	<link rel="stylesheet" href="css/mainBuiled.css" type="text/css">	
    <link rel="stylesheet" href="css/slider.css" type="text/css">
	<link rel="stylesheet" href="css/ol.css" type="text/css">
	<link rel="stylesheet" href="css/main.css" type="text/css">
	
    <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
    <script src="http://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="js/ol.js"></script>
	<script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/jquery-2.2.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script  src="js/colResizable-1.6.js"></script>
	<script src="js/double-slider.js"></script>
</head>

<body background="http://wallpapercave.com/wp/aVMEQR0.jpg">

	<div class="container-fluid">
        <div class="header">
        </div>
		
		<nav role="navigation" class="navbar navbar-default">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="#" class="navbar-brand">Kezdőlap</a>
			</div>
			<!-- Collection of nav links and other content for toggling -->
			<div id="navbarCollapse" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Térképes kereső</a></li>
					<li><a href="#">Eddig feldolgozott szegedi vonatkozású tudósok, művészek</a></li>
					<li><a href="#">Rólam</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#">Bejelentkezés</a></li>
				</ul>
			</div>
		</nav>
		
		<div class="main">
			<div class="col-sm-3 col-md-3">
                <div class="sidebar">
					<p style="color:white;" "font-size:150%;"><br><br><br>Szegedi tudósok, művészek, hírességek<br>
					Délmagyar Archívum cikkek alapján készült georeferált interaktív térkép<br>
					Kérlek válassz a tudósok közül:</p>
					<div  class="justify">
							<br/><br/>					
							<table id="range" width="100%" cellspacing="0" cellpadding="0" border="0">
								<tr>
									<td width="25%"></td>
									<td id="selection" width="50%"><span/></td>
									<td width="25%"></td>
								</tr>
							</table>						
							<p id="text">From 1932 To 1978</p>
							<br/><br/>
					</div>
					<form name="frm" method="post" action="">
						<div class="checkbox">
						  <label><input type="checkbox" id="checkbox_1" value="SzgyA">Szentgyörgyi Albert </label>
						</div>
						<div class="checkbox">
						  <label><input type="checkbox" id="checkbox_2" value="Boncz">Boncz Géza</label>
						</div>
						<div class="checkbox">
						  <label><input type="checkbox" id="checkbox_3" value="Radnóti">Radnóti Miklós</label>
						<div class="checkbox">  
						<label><input type="button" name="button" value="Megynyom" onclick="evelin_csuszka();" /></label>
						</div>
						<div class="checkbox">
						<label><input type="reset" value="Reset" /></label>
						</div>
						</div>
					</form>
				</div>
            </div>
			
            <div class="col-sm-9 col-md-9" id="map">
				<div class="map">					
					<a class="skiplink" href="#map">Go to map</a>
					<div id="popup"></div>
				</div>
            </div>
		</div>
		
		<div class="footer">
			<div class="col-sm-12 col-md-12">footer</div>
		</div>
    </div>
	
	<script>
		var csuszka_tol = 1932;
		var csuszka_ig = 1978;
		function evelin_csuszka() {
			var ezt_irom_ki = "Melyik évtized: " + csuszka_tol + "-tól " + csuszka_ig + "-ig" + "\n";
			if (document.getElementById('checkbox_1').checked) { ezt_irom_ki += "Kiválasztott név: " +  document.getElementById('checkbox_1').value + "\n"; }
			if (document.getElementById('checkbox_2').checked) { ezt_irom_ki += "Kiválasztott név: Boncz Géza\n"; }
			if (document.getElementById('checkbox_3').checked) { ezt_irom_ki += "Kiválasztott név: Radnóti Miklós\n"; }
			alert(ezt_irom_ki);
		}
		
		//térképre eső pontok ábrázolásához
		var iconFeature = new ol.Feature({
			geometry: new ol.geom.Point(ol.proj.transform([12.47311, 41.8988173], 'EPSG:4326', 'EPSG:3857')),
			name: 'Cica 1',	
		  });
		  
		var iconFeature2 = new ol.Feature({
			geometry: new ol.geom.Point(ol.proj.transform([20.1486016, 46.2546312], 'EPSG:4326', 'EPSG:3857')),
			name: 'Cica 2',
		  });

		var iconFeature3 = new ol.Feature({
			geometry: new ol.geom.Point([2200000, 5600000]),
			name: 'cica 3',
		});

		var iconStyleHide = new ol.style.Style({
			display: 'none'
		});

		var iconStyle = new ol.style.Style({
			image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
			  anchor: [0.5, 46],
			  anchorXUnits: 'fraction',
			  anchorYUnits: 'pixels',
			  src: 'img/cat-grumpy-icon.png'
			}))
		});
		  
		var iconStyle2 = new ol.style.Style({
			image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
			  anchor: [0.5, 46],
			  anchorXUnits: 'fraction',
			  anchorYUnits: 'pixels',
			  src: 'img/cat-drunk-icon.png'
			}))
		});
		  
		var iconStyle3 = new ol.style.Style({
			image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
			  anchor: [0.5, 46],
			  anchorXUnits: 'fraction',
			  anchorYUnits: 'pixels',
			  src: 'img/cat-hiss-icon.png'
			}))
		});  

		iconFeature.setStyle(iconStyleHide);
		iconFeature2.setStyle(iconStyleHide);
		iconFeature3.setStyle(iconStyleHide);

		var vectorSource = new ol.source.Vector({
		  features: [iconFeature, iconFeature2, iconFeature3]
		});

		var vectorLayer = new ol.layer.Vector({
		  source: vectorSource
		});
		
		//GeoJSON-al:
		/*
		var vectorLayer = new ol.layer.Vector([
			source: new ol.source.GeoJSON({
				projection : 'EPSG:3857',
				url: 'historical_geo.json'
		})*/

		var rasterLayer = new ol.layer.Tile({
			source: new ol.source.OSM()
		});
	  
		var map = new ol.Map({
			layers: [rasterLayer, vectorLayer],
			target: document.getElementById('map'),
			controls: ol.control.defaults({
				attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
					collapsible: false
				})
			}),
			view: new ol.View({
				center: [2280000, 5860000],
				zoom: 5
			})
		});

		document.getElementById('checkbox_1').onclick = function() {
			if (this.checked) {
				iconFeature.setStyle(iconStyle);
			} else {
				iconFeature.setStyle(iconStyleHide);
			}
		};

		document.getElementById('checkbox_2').onclick = function() {
			if (this.checked) {
				iconFeature2.setStyle(iconStyle2);
			} else {
				iconFeature2.setStyle(iconStyleHide);
			}
		};

		document.getElementById('checkbox_3').onclick = function() {
			if (this.checked) {
				iconFeature3.setStyle(iconStyle3);
			} else {
				iconFeature3.setStyle(iconStyleHide);
			}
		};
		
		var element = document.getElementById('popup');

		  var popup = new ol.Overlay({
			element: element,
			positioning: 'bottom-center',
			stopEvent: false,
			offset: [0, -50]
		  });
		  map.addOverlay(popup);

		  // display popup on click
		  map.on('click', function(evt) {
			var feature = map.forEachFeatureAtPixel(evt.pixel,
				function(feature) {
				  return feature;
				});
			if (feature) {
			  var coordinates = feature.getGeometry().getCoordinates();
			  popup.setPosition(coordinates);
			  $(element).popover({
				'placement': 'top',
				'html': true,
				'content': feature.get('name')
			  });
			  $(element).popover('show');
			} else {
			  $(element).popover('destroy');
			}
		  });

		  // change mouse cursor when over marker
		  map.on('pointermove', function(e) {
			if (e.dragging) {
			  $(element).popover('destroy');
			  return;
			}
			var pixel = map.getEventPixel(e.originalEvent);
			var hit = map.hasFeatureAtPixel(pixel);
			map.getTarget().style.cursor = hit ? 'pointer' : '';
		  });
	</script>  
</body>
</html>
